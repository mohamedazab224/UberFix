# ๐ ุฏูุฑุฉ ุญูุงุฉ ุทูุจ ุงูุตูุงูุฉ - UberFix.shop

## ๐ ุญุงูุงุช ุงูุทูุจ (Request Status)

ุญุณุจ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงูุญุงูุงุช ุงููุชุงุญุฉ ูู:

```sql
ENUM: mr_status
1. Open          - ููุชูุญ (ุญุงูุฉ ุงูุจุฏุงูุฉ)
2. Assigned      - ุชู ุงูุชุฎุตูุต
3. InProgress    - ููุฏ ุงูุชูููุฐ
4. Waiting       - ูู ุงูุงูุชุธุงุฑ
5. Completed     - ููุชูู
6. Rejected      - ูุฑููุถ
7. Cancelled     - ููุบู
```

## ๐ฏ ูุฑุงุญู ุณูุฑ ุงูุนูู (Workflow Stages)

```typescript
'draft'          - ูุณูุฏุฉ
'submitted'      - ุชู ุงูุชูุฏูู โ (ุงููุฑุญูุฉ ุงูุฃููู)
'acknowledged'   - ุชู ุงูุงุณุชูุงู
'assigned'       - ุชู ุงูุชุฎุตูุต
'scheduled'      - ุชู ุงูุฌุฏููุฉ
'in_progress'    - ููุฏ ุงูุชูููุฐ
'inspection'     - ูุญุต
'waiting_parts'  - ูู ุงูุชุธุงุฑ ูุทุน ุงูุบูุงุฑ
'completed'      - ููุชูู
'billed'         - ุชู ุงูููุชุฑุฉ
'paid'           - ุชู ุงูุฏูุน
'closed'         - ูุบูู โ (ุงููุฑุญูุฉ ุงูููุงุฆูุฉ)
'cancelled'      - ููุบู
'on_hold'        - ูุนูู
```

## ๐ ุงูุฏูุฑุฉ ุงููุงููุฉ ููุทูุจ

### ุงููุณุงุฑ ุงูุทุจูุนู (Happy Path):
```
1. ุฅูุดุงุก ุงูุทูุจ
   โโ Status: Open
   โโ Workflow: submitted

2. ุงุณุชูุงู ุงูุทูุจ
   โโ Status: Open
   โโ Workflow: acknowledged

3. ุชุฎุตูุต ููู
   โโ Status: Assigned
   โโ Workflow: assigned

4. ุฌุฏููุฉ ุงูุฒูุงุฑุฉ
   โโ Status: Assigned
   โโ Workflow: scheduled

5. ุจุฏุก ุงูุนูู
   โโ Status: InProgress
   โโ Workflow: in_progress

6. ุฅููุงู ุงูุนูู
   โโ Status: Completed
   โโ Workflow: completed

7. ุฅุตุฏุงุฑ ูุงุชูุฑุฉ
   โโ Status: Completed
   โโ Workflow: billed

8. ุงูุฏูุน
   โโ Status: Completed
   โโ Workflow: paid

9. ุฅุบูุงู ุงูุทูุจ
   โโ Status: Completed
   โโ Workflow: closed โ
```

### ุงููุณุงุฑุงุช ุงูุจุฏููุฉ:

#### ูุณุงุฑ ุงูุงูุชุธุงุฑ:
```
InProgress โ Waiting (waiting_parts)
  โ
ูุตูู ุงููุทุน
  โ
InProgress โ Completed
```

#### ูุณุงุฑ ุงูุฅูุบุงุก:
```
ุฃู ูุฑุญูุฉ โ Cancelled (cancelled)
```

#### ูุณุงุฑ ุงูุฑูุถ:
```
Open/Submitted โ Rejected (ูุน ุณุจุจ)
```

#### ูุณุงุฑ ุงูุชุนููู:
```
ุฃู ูุฑุญูุฉ โ on_hold
  โ
ุงูุนูุฏุฉ ูููุฑุญูุฉ ุงูุณุงุจูุฉ
```

## ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุฃููุงุน ุงูุฅุดุนุงุฑุงุช:

#### 1. ุฅุดุนุงุฑุงุช ุฅูุดุงุก ุงูุทูุจ:
- **ุงููุณุชูู**: ุงููุณุคูู/ุงููุฏูุฑ
- **ุงููุญุชูู**: ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ ูู {client_name}
- **ุงูุชูููุช**: ููุฑู ุนูุฏ ุงูุฅูุดุงุก

#### 2. ุฅุดุนุงุฑุงุช ุชุบููุฑ ุงูุญุงูุฉ:
- **ุนูุฏ ุงูุชุฎุตูุต**:
  - ููููู: ุชู ุชุฎุตูุต ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ ูู
  - ููุนููู: ุชู ุชุฎุตูุต ููู ูุทูุจู
  
- **ุนูุฏ ุจุฏุก ุงูุนูู**:
  - ููุนููู: ุงูููู ูู ุงูุทุฑูู/ุจุฏุฃ ุงูุนูู
  
- **ุนูุฏ ุงูุฅููุงู**:
  - ููุนููู: ุชู ุฅููุงู ุทูุจ ุงูุตูุงูุฉ
  - ูููุฏูุฑ: ุทูุจ {id} ุชู ุฅููุงูู

#### 3. ุฅุดุนุงุฑุงุช SLA:
- **ุชูุจูู ูุจู ุงูุชูุงุก ุงูููุนุฏ** (30 ุฏูููุฉ):
  - ููููู ุงููุฎุตุต
  - ูููุดุฑู
  
- **ุชูุจูู ุชุฌุงูุฒ ุงูููุนุฏ**:
  - ูููุฏูุฑ
  - ููุนููู

### ูููุงุช ุงูุฅุดุนุงุฑุงุช:
- โ In-App (ุฏุงุฎู ุงูุชุทุจูู)
- โ๏ธ Email (ููุฏ ุงูุชูุนูู)
- โ๏ธ SMS (ููุฏ ุงูุชูุนูู)
- โ๏ธ WhatsApp (ููุฏ ุงูุชูุนูู)

## ๐ ูุนูููุงุช ุฅุถุงููุฉ

### ุงูุญููู ุงููุงูุฉ:

```typescript
// ูุนูููุงุช ุงูุนููู
client_name: string
client_phone: string
client_email: string

// ูุนูููุงุช ุงููููุน
location: string
latitude: number (optional)
longitude: number (optional)
property_id: uuid (optional)

// ูุนูููุงุช SLA
sla_accept_due: timestamp    // ููุนุฏ ูุจูู ุงูุทูุจ
sla_arrive_due: timestamp    // ููุนุฏ ูุตูู ุงูููู
sla_complete_due: timestamp  // ููุนุฏ ุฅููุงู ุงูุนูู

// ูุนูููุงุช ุงูุชูููุฉ
estimated_cost: number
actual_cost: number

// ูุนูููุงุช ุงูุชุฎุตูุต
assigned_vendor_id: uuid
vendor_notes: text

// ุงูุชูููู
rating: integer (1-5)
customer_notes: text
```

## โ ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ ููุงุฎุชุจุงุฑ

### 1. ุฅูุดุงุก ุงูุทูุจ:
- [ ] ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ ูู ุงููููุฐุฌ
- [ ] ุงูุชุญูู ูู ุงูุญุงูุฉ ุงูุฃูููุฉ (Open/submitted)
- [ ] ุงูุชุญูู ูู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ

### 2. ุชุบููุฑ ุงูุญุงูุงุช:
- [ ] ุชุบููุฑ ุฅูู Assigned
- [ ] ุชุบููุฑ ุฅูู InProgress
- [ ] ุชุบููุฑ ุฅูู Completed
- [ ] ุงูุชุญูู ูู ุงูุฅุดุนุงุฑุงุช ูู ูู ูุฑุญูุฉ

### 3. ุงููุณุงุฑุงุช ุงูุจุฏููุฉ:
- [ ] ุฅูุบุงุก ุงูุทูุจ (Cancelled)
- [ ] ุฑูุถ ุงูุทูุจ (Rejected)
- [ ] ุชุนููู ุงูุทูุจ (on_hold)
- [ ] ุงูุชุธุงุฑ ูุทุน ุบูุงุฑ (Waiting)

### 4. SLA:
- [ ] ุชุนููู ููุงุนูุฏ SLA
- [ ] ุงุฎุชุจุงุฑ ุงูุชูุจููุงุช

### 5. ุงูุฅุดุนุงุฑุงุช:
- [ ] ุฅุดุนุงุฑุงุช in-app ุชุธูุฑ
- [ ] ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
- [ ] ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช

### 6. ุงูุชูุงูู:
- [ ] ุฑุจุท ุงูุทูุจ ุจุนูุงุฑ
- [ ] ุชุฎุตูุต ููู
- [ ] ุฅุถุงูุฉ ููุงุญุธุงุช
- [ ] ุชูููู ุงูุฎุฏูุฉ

## ๐ ุฃูุงู ุงูุจูุงูุงุช (RLS Policies)

ุชุฃูุฏ ูู ูุฌูุฏ:
- โ ุณูุงุณุงุช ุงููุฑุงุกุฉ (SELECT)
- โ ุณูุงุณุงุช ุงูุฅูุดุงุก (INSERT)
- โ ุณูุงุณุงุช ุงูุชุญุฏูุซ (UPDATE)
- โ ุณูุงุณุงุช ุงูุญุฐู (DELETE)

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุญุงูุฉ vs ุงููุฑุญูุฉ**: 
   - `status` (mr_status): ุงูุญุงูุฉ ุงูุนุงูุฉ
   - `workflow_stage`: ุงููุฑุญูุฉ ุงูุชูุตูููุฉ

2. **ุงูุฅุดุนุงุฑุงุช ุงูุญุงููุฉ**:
   - ููุฌุฏ ุจุนุถ ุฅุดุนุงุฑุงุช error_log
   - ูุฌุจ ุงูุชุฃูุฏ ูู ุฅุดุนุงุฑุงุช ุชุบููุฑ ุงูุญุงูุฉ

3. **ุงูููุงุนูุฏ (SLA)**:
   - sla_accept_due: ููุช ูุจูู ุงูุทูุจ
   - sla_arrive_due: ููุช ูุตูู ุงูููู
   - sla_complete_due: ููุช ุฅููุงู ุงูุนูู

4. **ุงูุชุชุจุน**:
   - created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
   - updated_at: ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ
   - archived_at: ุชุงุฑูุฎ ุงูุฃุฑุดูุฉ (ุฅู ูุฌุฏ)
