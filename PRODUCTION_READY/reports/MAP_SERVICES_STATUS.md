# ุชูุฑูุฑ ุญุงูุฉ ุฎุฏูุงุช ุงูุฎุฑุงุฆุท
**ุงูุชุงุฑูุฎ:** 2025-11-14  
**ุงูุญุงูุฉ:** โ ููุญุฏ ููุณุชูุฑ

---

## ๐ ููุฎุต ุชูููุฐู

ุชู ุชูุญูุฏ ูุธุงู ุงูุฎุฑุงุฆุท ูู ุงููุดุฑูุน ุจุญุฐู `/uber-map` ูุงูุงุณุชูุฑุงุฑ ุนูู ููุท ููุญุฏ ุจุงุณุชุฎุฏุงู Google Maps API ูุน ููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู.

---

## ๐บ๏ธ ุฎุฏูุงุช ุงูุฎุฑุงุฆุท ุงููุชุจููุฉ (ุงูููุญุฏุฉ)

### 1. **ุฎุฑูุทุฉ ุงูุฎุฏูุงุช ุงูุฑุฆูุณูุฉ** `/service-map`
- **ุงูููู:** `src/pages/maintenance/ServiceMap.tsx`
- **ุงููุธููุฉ:** ุนุฑุถ ุฎุฑูุทุฉ ุชูุงุนููุฉ ููููููู ุงููุชุงุญูู ูุน ุฅููุงููุฉ ุงูุจุญุซ ูุงูุชุตููุฉ
- **ุงููุฒุงูุง:**
  - ุชุตููุฉ ุญุณุจ ุงูุชุฎุตุต (ููุฑุจุงุกุ ุณุจุงูุฉุ ุชููููุ ุฅูุฎ)
  - ุงูุจุญุซ ุงููุตู ุนู ุงูููููู
  - ุนุฑุถ ุชูุงุตูู ูู ููู (ุงูุชููููุ ุงูุณุนุฑุ ุงูุญุงูุฉ)
  - ุชูุงูู ูุน Google Maps API
  - ูุงุฌูุฉ ูุณุชุฎุฏู ุนุฑุจูุฉ ูุงููุฉ
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ ููุณุชุฎุฏูุฉ

### 2. **ุฎุฑูุทุฉ ุงูุฃูุงูู ุงูุนุงูุฉ** `/map`
- **ุงูููู:** `src/pages/Map.tsx`
- **ุงููุธููุฉ:** ุฎุฑูุทุฉ ุนุงูุฉ ูุนุฑุถ ููุฏูู ุงูุฎุฏูุงุช ูุงูููุงูุน
- **ุงููุฒุงูุง:**
  - ุนุฑุถ markers ููููููู
  - ุชุตููุฉ ุญุณุจ ุงูุชุฎุตุต
  - ูุงุฌูุฉ sidebar ูุน ุชูุงุตูู ุงูููููู
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ (ุตูุญุฉ ุนุงูุฉ - publicRoute)

### 3. **ุฎุฑูุทุฉ ุชูุงุนููุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ**
- **ุงูููู:** `src/components/landing/InteractiveMap.tsx`
- **ุงููุธููุฉ:** ุนุฑุถ ุชูุงุนูู ูููุฑูุน ูููุฏูู ุงูุฎุฏูุงุช ุนูู ุตูุญุฉ ุงููุจูุท
- **ุงููุฒุงูุง:**
  - ุนุฑุถ ุงููุฑูุน ูุงูููุฑุฏูู
  - ููุงูุฐ ูุนูููุงุช ุชูุงุนููุฉ
  - ุชูุงูู ูุน VendorsList
  - dialogs ูุนุฑุถ ุชูุงุตูู ุงููุฑูุน ูุงูููุฑุฏูู
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ (ูููู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ)

---

## ๐งฉ ุงูููููุงุช ุงููุดุชุฑูุฉ

### 1. **ูููู ุงูุฎุฑูุทุฉ ุงููุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู**
- **ุงูููู:** `src/components/maps/GoogleMap.tsx`
- **ุงููุธููุฉ:** ูููู ุฃุณุงุณู ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูุฌููุน ุงูุฎุฑุงุฆุท
- **ุงููุฒุงูุง:**
  - ุฏุนู markers ูุฎุตุตุฉ
  - ุฅููุงููุฉ ุงูุจุญุซ ุนู ุงูุฃูุงูู
  - ุชุญุฏูุฏ ุงููููุน ุงูุญุงูู
  - ุฏุนู Interactive/Static modes
  - ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ ูุงูู markers
  - caching ููู API Key (24 ุณุงุนุฉ)
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ ููุณุชุฎุฏูุฉ ูู ุฌููุน ุงูุฎุฑุงุฆุท

### 2. **ูุงูุฐุฉ ูุนูููุงุช ุงููุฑูุน**
- **ุงูููู:** `src/components/maps/BranchInfoWindow.tsx`
- **ุงููุธููุฉ:** ุนุฑุถ ูุนูููุงุช ุงููุฑุน ูู ูุงูุฐุฉ ููุจุซูุฉ
- **ุงููุฒุงูุง:**
  - ุนุฑุถ ุงูุนููุงูุ ุงููุงุชูุ ุณุงุนุงุช ุงูุนูู
  - ุชุตููู ููุญุฏ ูุน ูุธุงู ุงูุชุตููู
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

---

## ๐ง ุงูุฎุฏูุงุช ุงูุฏุงุนูุฉ

### 1. **Google Maps Loader**
- **ุงูููู:** `src/lib/googleMapsLoader.ts`
- **ุงููุธููุฉ:** singleton ูุชุญููู Google Maps API ูุฑุฉ ูุงุญุฏุฉ
- **ุงููุฒุงูุง:**
  - ููุน ุชุญููู ุงูููุชุจุฉ ุนุฏุฉ ูุฑุงุช
  - ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูููุทูุฉ ุงููุตุฑูุฉ
  - ุชุญููู ุงูููุชุจุงุช ุงููุทููุจุฉ (places, geometry)
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

### 2. **Maps Cache Manager**
- **ุงูููู:** `src/lib/mapsCache.ts`
- **ุงููุธููุฉ:** ุฅุฏุงุฑุฉ cache ููู API Key ูู localStorage
- **ุงููุฒุงูุง:**
  - ุชุฎุฒูู ููุฏุฉ 24 ุณุงุนุฉ
  - ุชูููู ุงุณุชุฏุนุงุกุงุช Edge Functions
  - ูุญุต ุตูุงุญูุฉ ุงูู cache
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

### 3. **Edge Function ููู API Key**
- **ุงูููู:** `supabase/functions/get-maps-key/index.ts`
- **ุงููุธููุฉ:** ุชูููุฑ Google Maps API Key ุจุดูู ุขูู
- **ุงููุฒุงูุง:**
  - ุฏุนู ููุชุงุญูู (primary + fallback)
  - ูุนุงูุฌุฉ CORS
  - ุณุฌูุงุช ูุงุถุญุฉ ููุฃุฎุทุงุก
  - ุฑุณุงุฆู ุฎุทุฃ ุจุงูุนุฑุจูุฉ
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ ููููุดุฑุฉ

---

## ๐ช Custom Hooks

### 1. **useBranchLocations**
- **ุงูููู:** `src/hooks/useBranchLocations.ts`
- **ุงููุธููุฉ:** ุฌูุจ ููุงูุน ุงููุฑูุน ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงููุฒุงูุง:**
  - ุชุตููุฉ ุงููุฑูุน ุบูุฑ ุงูุตุงูุญุฉ (ุจุฏูู coordinates)
  - ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช
  - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

### 2. **useVendorLocations**
- **ุงูููู:** `src/hooks/useVendorLocations.ts`
- **ุงููุธููุฉ:** ุฌูุจ ููุงูุน ุงูููุฑุฏูู ูุฅูุฌุงุฏ ุงูุฃูุฑุจ
- **ุงููุฒุงูุง:**
  - ุฌูุจ ุงูููุฑุฏูู ุงููุดุทูู
  - ุงูุจุญุซ ุนู ุงูููุฑุฏูู ุงูุฃูุฑุจ ุจุงุณุชุฎุฏุงู RPC
  - ุชุตููุฉ ุญุณุจ ููุน ุงูุฎุฏูุฉ
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

### 3. **useVendorRouting**
- **ุงูููู:** `src/hooks/useVendorRouting.ts`
- **ุงููุธููุฉ:** ุญุณุงุจ ุงููุณุงุฑ ูุงูููุช ุงููุชููุน ูููุตูู
- **ุงููุฒุงูุง:**
  - ุญุณุงุจ ุงููุณุงูุฉ ูุงูููุช
  - ุชุญุฏูุซ ุชููุงุฆู ูู 30 ุซุงููุฉ
  - ุนุฑุถ polyline ูููุณุงุฑ
- **ุงูุญุงูุฉ:** โ ูุดุทุฉ

---

## ๐จ ุฃููููุงุช ุงูุฎุฑุงุฆุท ุงููุฎุตุตุฉ

### ูุฌููุนุฉ Pin Pro
- **ุงููููุน:** `public/icons/pin-pro/`
- **ุงูุฃููููุงุช ุงููุชููุฑุฉ:**
  - `customers.svg` - ุฃููููุฉ ุงูุนููุงุก
- **ุงูููุงุตูุงุช:**
  - ุฃุจุนุงุฏ: 60x72 ุจูุณู
  - ุชุตููู ุงุญุชุฑุงูู ูุน ุชุฏุฑุฌุงุช ููููุฉ
  - ุฏุนู SVG ูุฌูุฏุฉ ุนุงููุฉ
- **ุงูุญุงูุฉ:** โ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงูุนูุตุฑ | ุงูุนุฏุฏ | ุงูุญุงูุฉ |
|--------|-------|---------|
| ุตูุญุงุช ุงูุฎุฑุงุฆุท | 2 | โ ูุดุทุฉ |
| ููููุงุช ุงูุฎุฑุงุฆุท | 3 | โ ูุดุทุฉ |
| Custom Hooks | 3 | โ ูุดุทุฉ |
| Edge Functions | 1 | โ ููุดูุฑุฉ |
| Utility Files | 2 | โ ูุดุทุฉ |
| ุฃููููุงุช ูุฎุตุตุฉ | 1 | โ ุฌุงูุฒุฉ |

---

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

1. โ **ุชูุญูุฏ ุงูููุท:** ุญุฐู `/uber-map` ูุงูุงุณุชูุฑุงุฑ ุนูู ููุท Google Maps
2. โ **ููููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู:** `GoogleMap` component ูุดุชุฑู
3. โ **Caching ุฐูู:** ุชุฎุฒูู API Key ููุฏุฉ 24 ุณุงุนุฉ
4. โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:** ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
5. โ **Performance:** Singleton pattern ูุชุญููู Maps ูุฑุฉ ูุงุญุฏุฉ
6. โ **Security:** API Key ูุญูู ูู Edge Function
7. โ **UX:** ูุงุฌูุงุช ุนุฑุจูุฉ ูุงููุฉ ูุน ุชุตููุฉ ูุจุญุซ

---

## ๐ฏ ุงูุชูุตูุงุช ูููุณุชูุจู

### ูุตูุฑุฉ ุงููุฏู (ุฌุงูุฒุฉ ููุฅูุชุงุฌ)
1. โ ุงููุธุงู ุฌุงูุฒ ูููุดุฑ ุจุฏูู ุชุนุฏููุงุช ุฅุถุงููุฉ
2. โ ุฌููุน ุงูููููุงุช ูุฎุชุจุฑุฉ ููุณุชูุฑุฉ
3. โ ูุง ุชูุฌุฏ ุชุจุนูุงุช ุนูู `/uber-map` ุงููุญุฐูู

### ูุชูุณุทุฉ ุงููุฏู (ุชุญุณููุงุช ุงุฎุชูุงุฑูุฉ)
1. ุฅุถุงูุฉ markers ูุฎุตุตุฉ ุฃูุซุฑ ููุชุฎุตุตุงุช ุงููุฎุชููุฉ
2. ุฏุนู clusters ููู markers ุนูุฏ ูุฌูุฏ ุนุฏุฏ ูุจูุฑ
3. ุฅุถุงูุฉ routing/directions ุจูู ููุทุชูู
4. ุฏุนู offline mode ูุน caching ููุฎุฑุงุฆุท

### ุทูููุฉ ุงููุฏู (ุชูุณุนุงุช ูุณุชูุจููุฉ)
1. ุชูุงูู ูุน ุฎุฏูุงุช ููู ุฃุฎุฑู (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
2. Real-time tracking ููููููู
3. Heat maps ูุชูุฒูุน ุงูุทูุจุงุช
4. Analytics ูุฃุฏุงุก ุงูููุงุทู ุงูุฌุบุฑุงููุฉ

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

- **Google Maps API Key**: ูุฌุจ ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูุฑุตูุฏ ุงููุงูู ูู ุญุณุงุจ Google Cloud
- **Rate Limiting**: ูุฑุงูุจุฉ ุนุฏุฏ ุงูุทูุจุงุช ุนูู Edge Function
- **Cache Invalidation**: ูุชู ุชุญุฏูุซ ุงูู cache ุชููุงุฆููุง ูู 24 ุณุงุนุฉ
- **Browser Support**: ูุนูู ุนูู ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- **Mobile Responsive**: ุฌููุน ุงูุฎุฑุงุฆุท ูุชุฌุงูุจุฉ ูุน ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ

---

## ๐ ุงูุฃูุงู

- โ API Key ูุญูู ูู Environment Variables
- โ ูุง ูุชู ุนุฑุถ ุงูู API Key ูู ุงูููุฏ ุงูุฃูุงูู
- โ CORS ูููููู ุจุดูู ุตุญูุญ
- โ Rate limiting ุนูู ูุณุชูู Google Cloud Console

---

**ุงูุฎูุงุตุฉ:** ูุธุงู ุงูุฎุฑุงุฆุท ููุญุฏุ ูุณุชูุฑุ ูุฌุงูุฒ ููุฅูุชุงุฌ ูุน 620 ูุณุชุฎุฏู ูู ุงูููู ุงูุฃูู. โ
