# ุชูุฑูุฑ ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ ูุชุทุจูู UberFix.shop

## ๐ ููุฎุต ุชูููุฐู

ุชู ุฅุฌุฑุงุก ูุฑุงุฌุนุฉ ุดุงููุฉ ูุฌููุน ููุงุฐุฌ ุงูุฅุฏุฎุงูุ ุงูุฌุฏุงููุ ูุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ูู ุงูุชุทุจูู ููุชุฃูุฏ ูู:
1. ุชูุงูู ุญููู ุงูููุงุฐุฌ ูุน ุฃุนูุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุตุญุฉ ุนูู ุฌููุน ุงูุฃุฒุฑุงุฑ ูุงููุธุงุฆู
3. ูุฌูุฏ Validation ููุงุณุจ ูุญูุงูุฉ ุงูุจูุงูุงุช
4. ุชุทุงุจู ุณูุงุณุงุช RLS ูุน ูุชุทูุจุงุช ุงูุฃูุงู

---

## โ ุงูููุงุฐุฌ ุงูููุญูุตุฉ

### 1. ูููุฐุฌ ุทูุจุงุช ุงูุตูุงูุฉ (NewRequestForm)
**ุงูููู:** `src/components/forms/NewRequestForm.tsx`

#### โ ุงูุญููู ุงูููุฌูุฏุฉ:
- `title` - โ ููุฌูุฏ ูู ุฌุฏูู `maintenance_requests`
- `description` - โ ููุฌูุฏ
- `client_name` - โ ููุฌูุฏ
- `client_phone` - โ ููุฌูุฏ
- `location` - โ ููุฌูุฏ
- `service_type` - โ ููุฌูุฏ
- `priority` - โ ููุฌูุฏ
- `property_id` - โ๏ธ **ุบูุฑ ููุฌูุฏ ูู ุฌุฏูู maintenance_requests**

#### โ๏ธ ุงููุดุงูู ุงูููุชุดูุฉ:
1. **ุญูู `property_id` ููููุฏ ูู ุฌุฏูู `maintenance_requests`**
   - ุงููููุฐุฌ ูุญูุธ property_id ููู ุงูุฌุฏูู ูุง ูุญุชูู ุนูู ูุฐุง ุงูุนููุฏ
   - ุงูุญู: ุฅุถุงูุฉ ุนููุฏ property_id ุฅูู ุฌุฏูู maintenance_requests

2. **ุญูู `client_email` ููููุฏ ูู ุงููููุฐุฌ**
   - ุงูุฌุฏูู ูุญุชูู ุนูู client_email ููู ุงููููุฐุฌ ูุง ูุทูุจู

3. **ุญููู `latitude` ู `longitude` ูู ุงููููุฐุฌ ููุท**
   - ูุง ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุงูุญู: ุฅุถุงูุฉ ูุฐู ุงูุญููู ููุฌุฏูู ุฃู ุฅุฒุงูุชูุง ูู ุงููููุฐุฌ

#### โ Validation ุงูููุฌูุฏ:
- โ ุงูุชุญูู ูู ุงูุนููุงู (min 1 character)
- โ ุงูุชุญูู ูู ุงุณู ุงูุนููู
- โ ุงูุชุญูู ูู ุฑูู ุงููุงุชู ุจู Regex ูุตุฑู
- โ ุงูุชุญูู ูู ูุฌูุฏ property_id

---

### 2. ูููุฐุฌ ุงูุนูุงุฑุงุช (PropertyForm)
**ุงูููู:** `src/components/forms/PropertyForm.tsx`

#### โ ุงูุญููู ุงูููุฌูุฏุฉ:
- `name` - โ ููุฌูุฏ ูู ุฌุฏูู `properties`
- `type` - โ ููุฌูุฏ
- `address` - โ ููุฌูุฏ
- `area` - โ ููุฌูุฏ
- `rooms` - โ ููุฌูุฏ
- `bathrooms` - โ ููุฌูุฏ
- `floors` - โ ููุฌูุฏ
- `parking_spaces` - โ ููุฌูุฏ
- `description` - โ ููุฌูุฏ
- `region_id` - โ ููุฌูุฏ
- `latitude` - โ ููุฌูุฏ
- `longitude` - โ ููุฌูุฏ
- `icon_url` - โ ููุฌูุฏ
- `manager_id` - โ ูุชู ุฅุถุงูุชู ุชููุงุฆูุงู ูู user.id

#### โ Validation ุงูููุฌูุฏ:
- โ ุงุณุชุฎุฏุงู Zod Schema
- โ min 3 characters ููุงุณู
- โ ุงูุชุญูู ูู ููุน ุงูุนูุงุฑ ูู ูุงุฆูุฉ ูุญุฏุฏุฉ
- โ ุชุญููู ุงูููู ุงูุฑูููุฉ ุจุดูู ุตุญูุญ

#### โ ูุง ุชูุฌุฏ ูุดุงูู

---

### 3. ูููุฐุฌ ุงูููุงุนูุฏ (NewAppointmentForm)
**ุงูููู:** `src/components/forms/NewAppointmentForm.tsx`

#### โ ุงูุญููู ุงูููุฌูุฏุฉ:
- `title` - โ ููุฌูุฏ ูู ุฌุฏูู `appointments`
- `description` - โ ููุฌูุฏ
- `customer_name` - โ ููุฌูุฏ
- `customer_phone` - โ ููุฌูุฏ
- `customer_email` - โ ููุฌูุฏ
- `duration_minutes` - โ ููุฌูุฏ
- `property_id` - โ ููุฌูุฏ
- `vendor_id` - โ ููุฌูุฏ
- `location` - โ ููุฌูุฏ
- `notes` - โ ููุฌูุฏ
- `appointment_date` - โ ููุฌูุฏ
- `appointment_time` - โ ููุฌูุฏ

#### โ Validation ุงูููุฌูุฏ:
- โ ุงูุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ
- โ ุชุญููู duration_minutes ุฅูู integer
- โ ููุน ุงุฎุชูุงุฑ ุชุงุฑูุฎ ูู ุงููุงุถู

#### โ ูุง ุชูุฌุฏ ูุดุงูู

---

### 4. ูููุฐุฌ ุฅุถุงูุฉ ููุฑุฏ/ููู (NewVendorForm)
**ุงูููู:** `src/components/forms/NewVendorForm.tsx`

#### โ๏ธ ุงููุดุงูู ุงูููุชุดูุฉ:
1. **ุฌุฏูู `vendors` ุบูุฑ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   - ุงููููุฐุฌ ูุญุงูู ุงูุญูุธ ูู ุฌุฏูู vendors ููู ุงูุฌุฏูู ุบูุฑ ููุฌูุฏ ูู Supabase
   - **ุงูุญู ุงููุทููุจ:** ุฅูุดุงุก ุฌุฏูู vendors ุฃู ุงุณุชุฎุฏุงู ุฌุฏูู technicians

2. **ุงูุญูุธ ุงููุฒุฏูุฌ ูู profiles ู vendors**
   - ุงููููุฐุฌ ูุญูุธ ูู profiles ุฃููุงู ุซู vendors
   - ูุฐุง ูุฏ ูุณุจุจ ูุดุงูู ุฅุฐุง ูุดู ุฃุญุฏููุง

#### ๐ ุงูุญููู ุงููุทููุจุฉ ูุฌุฏูู vendors:
```sql
- id (uuid)
- name (text)
- company_name (text nullable)
- specialization (text[] array)
- phone (text)
- email (text)
- address (text)
- hourly_rate (numeric)
- experience_years (integer)
- status (text)
- map_icon (text nullable) -- ุชูุช ุฅุถุงูุชู ุญุฏูุซุงู
```

---

### 5. ูููุฐุฌ ุงูููุงุชูุฑ (NewInvoiceForm)
**ุงูููู:** `src/components/forms/NewInvoiceForm.tsx`

#### โ ุงูุญููู ุงูููุฌูุฏุฉ:
- `customer_name` - โ ููุฌูุฏ ูู ุฌุฏูู `invoices`
- `customer_email` - โ ููุฌูุฏ
- `customer_phone` - โ ููุฌูุฏ
- `due_date` - โ ููุฌูุฏ
- `notes` - โ ููุฌูุฏ
- `items` - โ ูุชู ุญูุธูุง ูู ุฌุฏูู `invoice_items`

#### โ Validation ุงูููุฌูุฏ:
- โ ุงุณุชุฎุฏุงู Zod Schema
- โ ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงูุชุญูู ูู ูุฌูุฏ ุนูุตุฑ ูุงุญุฏ ุนูู ุงูุฃูู
- โ ุญุณุงุจ ุงููุฌููุน ุชููุงุฆูุงู

#### โ ูุง ุชูุฌุฏ ูุดุงูู

---

## ๐ ูุฑุงุฌุนุฉ ุณูุงุณุงุช ุงูุฃูุงู (RLS Policies)

### ุฌุฏูู `maintenance_requests`
โ **ุงูุณูุงุณุงุช ุงูููุฌูุฏุฉ:**
- SELECT: ูููู ูููุณุชุฎุฏู ุฑุคูุฉ ุทูุจุงุชู + ุงูุฅุฏุงุฑููู ูุฑูู ูู ุดูุก
- INSERT: ุงููุณุชุฎุฏู ููููู ุฅูุดุงุก ุทูุจุงุช
- UPDATE: ุงููุณุชุฎุฏู + ุงูุฅุฏุงุฑููู
- DELETE: ุงูุฅุฏุงุฑููู ููุท

โ๏ธ **ููุงุญุธุฉ:** 
- ูุง ููุฌุฏ ูุญุต ูู company_id ุนูุฏ INSERT
- ูุฏ ูุณุจุจ ูุดุงูู ุฅุฐุง ูู ูุชู ุถุจุท company_id ุชููุงุฆูุงู

### ุฌุฏูู `properties`
โ **ุงูุณูุงุณุงุช ุงูููุฌูุฏุฉ:**
- SELECT: ุงูุนูุงุฑุงุช ุงููุดุทุฉ ููุท
- INSERT: ุฃู ูุณุชุฎุฏู ูุณุฌู
- UPDATE: ุงููุฏูุฑ ููุท (manager_id = auth.uid())
- DELETE: ุงููุฏูุฑ ููุท

โ๏ธ **ููุงุญุธุฉ:**
- ุณูุงุณุฉ INSERT ูุงุณุนุฉ ุฌุฏุงู - ุฃู ูุณุชุฎุฏู ููููู ุฅุถุงูุฉ ุนูุงุฑ
- ูุฏ ุชุญุชุงุฌ ูุชูููุฏ ุฐูู

### ุฌุฏูู `appointments`
โ **ุงูุณูุงุณุงุช ุงูููุฌูุฏุฉ:**
- SELECT: ุงููุณุชุฎุฏู + ุงูููู ุงููุนูู + ุงูุฅุฏุงุฑููู
- INSERT: created_by = auth.uid()
- UPDATE: ุงููุณุชุฎุฏู + ุงูููู + ุงูุฅุฏุงุฑููู
- DELETE: ุงูุฅุฏุงุฑููู ููุท

โ **ุณูุงุณุงุช ุฌูุฏุฉ ููุชูุงุฒูุฉ**

### ุฌุฏูู `invoices`
โ **ุงูุณูุงุณุงุช ุงูููุฌูุฏุฉ:**
- SELECT: ุงููุณุชุฎุฏู ูุฑู ููุงุชูุฑู ููุท
- INSERT: ุงููุณุชุฎุฏู ูุถูู ููุงุชูุฑู
- UPDATE: ุงููุณุชุฎุฏู ูุนุฏู ููุงุชูุฑู
- DELETE: **ุบูุฑ ูุณููุญ ููุฌููุน**

โ๏ธ **ูุดููุฉ:** ูุง ูููู ุญุฐู ุงูููุงุชูุฑ ููุงุฆูุงู

---

## ๐ ุงูุฃุฎุทุงุก ุงูุญุฑุฌุฉ ุงูููุชุดูุฉ

### 1. โ๏ธ ุฌุฏูู vendors ุบูุฑ ููุฌูุฏ
**ุงูุฃููููุฉ: ุนุงููุฉ**
- ุงููููุฐุฌ ูุญุงูู ุงูุญูุธ ููู ุงูุฌุฏูู ุบูุฑ ููุฌูุฏ
- **ุงูุญู:** ุฅูุดุงุก migration ูุฅุถุงูุฉ ุฌุฏูู vendors

### 2. โ๏ธ property_id ููููุฏ ูู maintenance_requests
**ุงูุฃููููุฉ: ูุชูุณุทุฉ**
- ุงููููุฐุฌ ูุญูุธ property_id ููู ุงูุฌุฏูู ูุง ูุญุชููู
- **ุงูุญู:** ุฅุถุงูุฉ ุนููุฏ property_id ููุฌุฏูู

### 3. โ๏ธ latitude/longitude ููููุฏุฉ ูู maintenance_requests
**ุงูุฃููููุฉ: ูุชูุณุทุฉ**
- ุงููููุฐุฌ ูุฌูุน ุงููููุน ููู ูุง ูุญูุธู
- **ุงูุญู:** ุฅุถุงูุฉ ุฃุนูุฏุฉ latitude ู longitude

---

## ๐ ุฌุฏุงูู ุชุญุชุงุฌ ุฅูุดุงุก ุฃู ุชุนุฏูู

### ุฌุฏูู vendors (ูุทููุจ ุฅูุดุงุคู)
```sql
CREATE TABLE vendors (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  company_name TEXT,
  specialization TEXT[] NOT NULL,
  phone TEXT,
  email TEXT,
  address TEXT,
  hourly_rate NUMERIC,
  experience_years INTEGER,
  status TEXT NOT NULL DEFAULT 'active',
  map_icon TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ุชุนุฏููุงุช ูุทููุจุฉ ุนูู maintenance_requests
```sql
ALTER TABLE maintenance_requests 
  ADD COLUMN property_id UUID REFERENCES properties(id),
  ADD COLUMN latitude DOUBLE PRECISION,
  ADD COLUMN longitude DOUBLE PRECISION;
```

---

## โ ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑ ุงูุดุงููุฉ

### ุงุฎุชุจุงุฑุงุช ุงูููุงุฐุฌ
- [ ] ูููุฐุฌ ุทูุจ ุตูุงูุฉ - ุฅุฏุฎุงู ุจูุงูุงุช ูุงููุฉ
- [ ] ูููุฐุฌ ุทูุจ ุตูุงูุฉ - ุงุฎุชุจุงุฑ Validation
- [ ] ูููุฐุฌ ุทูุจ ุตูุงูุฉ - ุชุญุฏูุฏ ูููุน ุนูู ุงูุฎุฑูุทุฉ
- [ ] ูููุฐุฌ ุนูุงุฑ - ุฅุถุงูุฉ ุนูุงุฑ ุฌุฏูุฏ
- [ ] ูููุฐุฌ ุนูุงุฑ - ุงุฎุชูุงุฑ ุฃููููุฉ
- [ ] ูููุฐุฌ ุนูุงุฑ - ุชุญุฏูุฏ ูููุน
- [ ] ูููุฐุฌ ููุนุฏ - ุญุฌุฒ ููุนุฏ ุฌุฏูุฏ
- [ ] ูููุฐุฌ ููุนุฏ - ุงุฎุชูุงุฑ ุชุงุฑูุฎ ูููุช
- [ ] ูููุฐุฌ ููู - ุฅุถุงูุฉ ููู ุฌุฏูุฏ (โ๏ธ ูุญุชุงุฌ ุฅุตูุงุญ)
- [ ] ูููุฐุฌ ููู - ุงุฎุชูุงุฑ ุฃููููุฉ ุนูู ุงูุฎุฑูุทุฉ
- [ ] ูููุฐุฌ ูุงุชูุฑุฉ - ุฅูุดุงุก ูุงุชูุฑุฉ
- [ ] ูููุฐุฌ ูุงุชูุฑุฉ - ุฅุถุงูุฉ ุนูุงุตุฑ ูุชุนุฏุฏุฉ

### ุงุฎุชุจุงุฑุงุช ุงูุตูุงุญูุงุช
- [ ] ูุณุชุฎุฏู ุนุงุฏู - ุฅูุดุงุก ุทูุจ ุตูุงูุฉ
- [ ] ูุณุชุฎุฏู ุนุงุฏู - ุฑุคูุฉ ุทูุจุงุชู ููุท
- [ ] ููู - ุฑุคูุฉ ุงูุทูุจุงุช ุงููุนููุฉ ูู
- [ ] ุฅุฏุงุฑู - ุฑุคูุฉ ุฌููุน ุงูุทูุจุงุช
- [ ] ุฅุฏุงุฑู - ุชุนุฏูู ูุญุฐู

### ุงุฎุชุจุงุฑุงุช ุงูุฎุฑูุทุฉ
- [ ] ุนุฑุถ ุงูุนููุงุก ุนูู ุงูุฎุฑูุทุฉ
- [ ] ุนุฑุถ ุงูููููู ุนูู ุงูุฎุฑูุทุฉ
- [ ] ุนุฑุถ ุงููุฑูุน ุนูู ุงูุฎุฑูุทุฉ
- [ ] Clustering ููุฃููููุงุช ุงููุชูุงุฑุจุฉ
- [ ] ุซุจุงุช ุญุฌู ุงูุฃููููุงุช ุนูุฏ Zoom

### ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู
- [ ] ุฅูุดุงุก ุทูุจ + ุฅุฑุณุงู ุฅุดุนุงุฑ ููููู
- [ ] ุญุฌุฒ ููุนุฏ + ุฑุจุทู ุจุนูุงุฑ
- [ ] ุฅุถุงูุฉ ุนูุงุฑ + ุงุณุชุฎุฏุงูู ูู ุทูุจ
- [ ] ุฅูุดุงุก ูุงุชูุฑุฉ + ุฑุจุทูุง ุจุทูุจ

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทููุจุฉ

### ุนุงุฌู (ูุฌุจ ุฅุตูุงุญูุง ูุจู ุงูุงุฎุชุจุงุฑ)
1. โ ุฅูุดุงุก ุฌุฏูู vendors ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ ุฅุถุงูุฉ property_id ุฅูู ุฌุฏูู maintenance_requests
3. โ ุฅุถุงูุฉ latitude/longitude ุฅูู maintenance_requests
4. โ ุฅุตูุงุญ ูููุฐุฌ ุฅุถุงูุฉ ููู ููุนูู ูุน ุงูุฌุฏูู ุงูุตุญูุญ

### ูุชูุณุท ุงูุฃูููุฉ
1. ุฅุถุงูุฉ ุญูู client_email ููููุฐุฌ ุทูุจุงุช ุงูุตูุงูุฉ
2. ุชุญุณูู ุณูุงุณุงุช RLS ูุฌุฏูู properties
3. ุฅุถุงูุฉ ุฅููุงููุฉ ุญุฐู ุงูููุงุชูุฑ (ูุน ุชุฃููุฏ)

### ููุฎูุถ ุงูุฃูููุฉ
1. ุฅุถุงูุฉ ุงููุฒูุฏ ูู Validation ููุญููู ุงูุงุฎุชูุงุฑูุฉ
2. ุชุญุณูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก
3. ุฅุถุงูุฉ loading states ุฃูุถู

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

1. **ุงุณุชุฎุฏุงู (supabase as any)**
   - ููุฌูุฏ ูู ุนุฏุฉ ูููุงุช
   - ูุฌุจ ุงุณุชุจุฏุงูู ุจู types ุตุญูุญุฉ ูู `@/integrations/supabase/types`

2. **Error Handling**
   - ูุนุธู ุงูููุงุฐุฌ ุชุณุชุฎุฏู try/catch ุจุดูู ุฌูุฏ
   - ููู ุจุนุถูุง ูุญุชุงุฌ ุฑุณุงุฆู ุฎุทุฃ ุฃูุถุญ ูููุณุชุฎุฏู

3. **ุงูู Validation**
   - NewInvoiceForm ู PropertyForm ูุณุชุฎุฏูุงู Zod โ
   - ุจุงูู ุงูููุงุฐุฌ ุชุณุชุฎุฏู validation ูุฏูู
   - ูููุตุญ ุจุชูุญูุฏ ุงูุฃุณููุจ

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุทุจูู ุงูุฅุตูุงุญุงุช ุงูุนุงุฌูุฉ**
   - ุฅูุดุงุก migration ูุฌุฏูู vendors
   - ุชุนุฏูู ุฌุฏูู maintenance_requests
   - ุชุนุฏูู NewVendorForm

2. **ุงุฎุชุจุงุฑ ุดุงูู**
   - ุงุฎุชุจุงุฑ ูู ูููุฐุฌ ุนูู ุญุฏุฉ
   - ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุงูุญูุงุฉ ุงููุงููุฉ
   - ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช

3. **ุชูุซูู ุงููุชุงุฆุฌ**
   - ุชุณุฌูู ุฃู ุฃุฎุทุงุก ุฌุฏูุฏุฉ
   - ุชูุซูู ุญุงูุงุช ุงูุงุณุชุฎุฏุงู
   - ุฅูุดุงุก User Manual

---

## ๐ ุฌุงูุฒ ููุงุฎุชุจุงุฑุ

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุงุช ุงูุนุงุฌูุฉุ ูููู ุงูุจุฏุก ูู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู.
ุงุณุชุฎุฏู ุงููุงุฆูุฉ ุฃุนูุงู ูู Checklist ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ.

**ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ:** 2025-11-06
**ุงููุฑุงุฌุน:** Lovable AI Assistant
